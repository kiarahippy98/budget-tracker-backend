<h1>Budget Dashboard</h1>

<h2>Total Balance</h2>
<p>
  <%= number_to_currency(
        @transactions.where(transaction_type: "income").sum(:amount) -
        @transactions.where(transaction_type: "expense").sum(:amount)
      ) %>
</p>

<hr>

<h2>Your Categories</h2>

<%= link_to "New Category", new_category_path %>

<ul>
  <% @categories.each do |c| %>
    <li>
      <%= c.name %>
    </li>
  <% end %>
</ul>

<hr>

<h2>Your Transactions</h2>

<%= link_to "New Transaction", new_transaction_path %>

<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Amount</th>
      <th>Category</th>
      <th>Type</th>
    </tr>
  </thead>

  <tbody>
    <% @transactions.each do |t| %>
      <tr>
        <td><%= t.description %></td>
        <td><%= number_to_currency(t.amount) %></td>
        <td><%= t.category&.name %></td>
        <td><%= t.transaction_type %></td>
      </tr>
    <% end %>
  </tbody>
</table>
